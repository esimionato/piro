<!DOCTYPE html>
<html>
<head>
  <title>PiRo</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <link href="stylesheets/reset.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="stylesheets/grids.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="stylesheets/spaces.css" media="screen" rel="stylesheet" type="text/css" />  
  <link href="stylesheets/group-headers.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="stylesheets/group-buttons.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="stylesheets/group-forms.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="stylesheets/layout.css" media="screen" rel="stylesheet" type="text/css" />
  <link href="stylesheets/library.css" media="screen" rel="stylesheet" type="text/css" />
</head>
<body>
  
  <div id="mainPage" class="outer page">
    <!-- main screen -->
    <div id="leftPanel" class="unit size1of2">
      <!-- panel -->      
      
      <div id="storiesTabs">
      	<div id="ownerStories" class="tabs_content_block">
      	  <ul class="nav outer">
        		<li class="owner tab size1of3"><a id="currentTabLabel" href="#currentTab">Current</a></li>
        		<li class="owner tab size1of3"><a id="doneTabLabel" href="#doneTab">Done</a></li>
        		<li class="owner tab size1of3"><a id="iceboxTabLabel" href="#iceboxTab">IceBox</a></li>
        	</ul>
      	  <!-- tabs content -->
        	<div id="currentTab" class="tabs_content data-holder">
        	  <ul id="currentStoriesList" class="projects_stories_list">
        	  </ul>
        	</div>
        	<div id="doneTab" class="tabs_content data-holder">
        		<ul id="doneStoriesList" class="projects_stories_list">
        	  </ul>
        	</div>
        	<div id="iceboxTab" class="tabs_content data-holder">
        		<ul id="iceboxStoriesList" class="projects_stories_list">
        	  </ul>
        	</div>
      	</div>	
      	
      	<!-- requester tabs content -->
      	<div id="requesterStories" class="tabs_content_block">
      	  <ul class="nav outer">
        		<li class="requester tab size1of3"><a id="currentRequesterTabLabel" href="#currentRequesterTab">Current</a></li>
        		<li class="requester tab size1of3"><a id="doneRequesterTabLabel" href="#doneRequesterTab">Done</a></li>
        		<li class="requester tab size1of3"><a id="iceboxRequesterTabLabel" href="#iceboxRequesterTab">IceBox</a></li>
        	</ul>
        	<div id="currentRequesterTab" class="tabs_content data-holder">
        	  <ul id="currentRequesterStoriesList" class="projects_stories_list">
        	  </ul>
        	</div>
        	<div id="doneRequesterTab" class="tabs_content data-holder">
        		<ul id="doneRequesterStoriesList" class="projects_stories_list">
        	  </ul>
        	</div>
        	<div id="iceboxRequesterTab" class="tabs_content data-holder">
        		<ul id="iceboxRequesterStoriesList" class="projects_stories_list">
        	  </ul>
        	</div>
      	</div>
      
        <div class="footer">
          <div class="outer ptxs">
            <div class="unit size1of2">
              <div id="changeAccountBox" class="unit mls">
                <!-- <label class="h4">Account:</label> -->
            	   <select id="changeAccount">
            	   </select>
            	</div>
            	<div id="selecterStoriesBox" class="unit-right mrs">
            	   <label class="h4">Role:</label>
            	   <select id="selecterStoriesType">
            	     <option value="owner">Owner</option>
            	     <option value="requester">Requester</option>
            	   </select>
            	 </div>
            </div> <!-- unit size1of2 -->
            <div class="unit size1of2">
              
            </div> <!-- unit size1of2 -->
          </div> <!-- outer -->          
        </div> <!-- footer -->      	
      	
      </div>
    </div>
    
    <!-- main story info and notifications -->
    <div id="rightPanel" class="unit size1of2">
      <div class="story-header outer">
        <div class="unit size4of5">
          <div class="plm">          
            <input id="searchStories" type="search" placeholder="Search stories" />
          </div> <!-- plm -->          
        </div> <!-- unit -->
        <div class="unit-right size1of5 txt-right">
          <span id="loaderSpinner"></span>
          <a href="#" class="add-task open_popup_button"><img src="images/add-light.png" alt="Add Story" /></a>
        </div> <!-- unit -->
      </div>
      <div id="storyInfo" class="data-holder grey-box pam"></div>
      <div id="infoPanel" class="data-holder empty txt-center"></div>
    </div>
    
  </div>
  
  <div id="loginPage" class="pal">
    <div class="txt-center mbm">
      <img id="loginLogo" src="images/rocket.png" alt="PiRo" />
    </div> <!-- txt-center -->
    
    <!-- login -->
    <strong class="error_msg error-text negative"></strong>
    <div class="pvs">
      <input id="loginUsername" class="h2" type="text" placeholder="Email" />
    </div> <!-- pvs -->
    <div class="pvs">
      <input id="loginPassword" class="h2" type="password" placeholder="Password" />
    </div> <!-- pvs -->
    <div>
      <div class="pvm txt-center">
        <a href="#" id="loginButton" class="button success large">Login</a>
      </div> <!-- pvs -->
    </div>
  </div>
  
  <!-- templates -->
  <script id="spinner_template" type="text/x-mustache-template">
    {{#is_loading}}
      <img src="images/spinner.gif" alt="{{loading_msg}}" title="{{loading_msg}}" />
    {{/is_loading}}
    {{^is_loading}}
      <a class="update_stories" href="#">
        <img src="images/refresh.gif" alt="{{update_msg}}" title="{{update_msg}}" />
      </a>
    {{/is_loading}}
  </script>
  
  <script id="project_cell_template" type="text/x-mustache-template">
    <li class="project_{{id}} project_cell{{#view_conditions}}{{#hide_project_cell}} hide-project{{/hide_project_cell}}{{/view_conditions}}" data-project-id="{{id}}">

      <div class="title"><span class="toggle_project" data-project-id="{{id}}"></span> {{name}} ({{count_of_stories}}) <span class="sort_project" title="Drag to sort projects" data-project-id="{{id}}"></span></div>
      
      <ul data-project-id="{{id}}" {{#is_requested_by_me}}data-requested="true"{{/is_requested_by_me}} class="list">
        {{#stories}}
          <li class="story_info story_{{id}} {{box_class}}-box outer" data-story-id="{{id}}">
            <div class="unit"><span class="{{story_type}}-icon"></span></div>
            <div class="unit size3of4">
              <div class="pls">
                {{name}} <!-- <span class="status">{{current_state}}</span> -->
              </div>              
            </div>              
          </li>
        {{/stories}}
      </ul>
    </li>
  </script>
  
  <script id="story_info_template" type="text/x-mustache-template">
    
    <div class="outer story-details-header">
      <div class="unit size1of2">
        <div class="outer clippy-holder mbxs">
          <div class="unit pale">ID: <span class="clippy-text neutral">{{id}}</span> </div>
          <div class="clippy-box"><div id="clippyStory{{id}}"></div></div>
        </div>
        <div class="outer clippy-holder">
          <div class="unit pale"><a href="{{url}}" target="_blank">Story link</a> </div>
          <div class="clippy-box"><div id="clippyUrl{{id}}"></div></div>
        </div>
      </div>
      <div class="unit size1of2 txt-right">        
        <div class="change_story_box">
          <div class="main options">      
          {{^unestimated_feature}}
          <div>
              <span class="label">Status: </span>
              <select class="change_story_state mbxs" data-story-id="{{id}}" data-project-id="{{project_id}}">
                <option value="unstarted">Not Yet Started</option>
                {{#story_type_can_started}}
                  <option value="started">Started</option>
                {{/story_type_can_started}}
                {{#story_type_many_statuses}}
                  <option value="finished">Finished</option>
                  <option value="delivered">Delivered</option>
                {{/story_type_many_statuses}}
                <option value="accepted">Accepted</option>
                {{#story_type_many_statuses}}
                  <option value="rejected">Rejected</option>
                {{/story_type_many_statuses}}
              </select>
            </div>
            {{/unestimated_feature}}
            
            {{#unestimated_feature}}
              <div class="mbxs">
                <span class="label">Status: </span> <div class="value">{{current_state}}</div>
              </div>
            {{/unestimated_feature}}
            
            {{#need_estimate}}
              <div>
              <span class="label">Estimate: </span>
              <select class="change_story_estimate" data-story-id="{{id}}" data-project-id="{{project_id}}">
                <option value="-1">Unestimated</option>
                {{#point_scale}}
                  <option value="{{point}}">{{point}} points</option>
                {{/point_scale}}
              </select>
              </div>
            {{/need_estimate}}
            
            {{^need_estimate}}
              <div>
                <span class="label">Estimate: </span> <div class="value">{{estimate_text}}</div>
              </div>
            {{/need_estimate}}
          </div>
          <div class="loader">
            <img src="images/spinner3.gif" alt="loading..." title="loading..." />
          </div>
        </div>
      </div>
    </div>

    
    <h1 class="mtxs pts mbxs story_title {{story_type}}-icon-title">{{name}}</h1>
    <div class="mbm">
        <div><span class="pale">Requested by:</span> {{requested_by.person.name}}</div>
    </div>
    
    <h2 class="mbs">Description</h2>
    <div class="story_description" data-description="{{description}}">{{description}}</div>
    {{#labels_html}}
      <h2 class="mbs">Labels: {{& text}}</h2>
    {{/labels_html}}
    <!-- tasks -->
    <h2 class="mbs mtm">
      Tasks 
      (filter:
      <a href="#" class="filter_all_tasks filter_tasks active">all</a> | 
      <a href="#" class="filter_completed_tasks filter_tasks">completed</a> | 
      <a href="#" class="filter_uncompleted_tasks filter_tasks">uncompleted</a>)
    </h2>
    {{#has_tasks}}
      <ul class="list tasks tasks_list">
        {{#tasks}}
          <li class="pvs task_block {{#complete}}completed{{/complete}}{{^complete}}uncompleted{{/complete}}">
            <div class="main">
              <span class="sort_task">sort</span>
              <label class="outer block">
                <span class="unit"><input class="task_checkbox" type="checkbox" data-task-id="{{id}}" data-story-id="{{story_id}}" data-project-id="{{project_id}}" {{#complete}}checked="checked"{{/complete}} /></span>
                <span class="mlm block">{{description}}</span>
              </label>
              <a href="#" class="edit_task_link">Edit</a>
              <a href="#" class="delete_task_link">Delete</a>
            </div>
            <div class="edit">
              <input class="edit_task_text" autocomplete="off" type="text" value="{{description}}" />
              <input class="edit_task_button" type="button" value="Edit" />
              <a href="#" class="cancel_task_link">Cancel</a>
            </div>
            <div class="loader">
              <img src="images/spinner3.gif" alt="loading..." title="loading..." />
            </div>
          </li>
        {{/tasks}}
      </ul>
    {{/has_tasks}}
    <div class="add_task_block action_block" data-story-id="{{id}}" data-project-id="{{project_id}}">
      <div class="main">
        <input class="add_task_text" autocomplete="off" type="text" />
        <input class="add_task_button" type="button" value="Add" />
      </div>
      <div class="loader">
        <img src="images/spinner3.gif" alt="loading..." title="loading..." />
      </div>
    </div>
    {{#has_attachments}}
      <h2 class="mbs mtm">Attachments</h2>
      <ul class="mbm list attachments">
        {{#attachments}}
          <li class="pvs">
            <div class="clippy-holder">
              <strong>{{uploaded_by.person.name}} </strong>
              <div class="neutral"><a href="{{url}}" target="_blank">{{filename}}</a></div>
              <div class="clippy-box">
                <div id="attachment_{{id}}" class="attachment_clippy" data-attachment-url="{{url}}"></div>
              </div>
            </div>
          </li>
        {{/attachments}}
      </ul>
    {{/has_attachments}}
    <h2 class="mbs mtm">Comments</h2>
    {{#has_comments}}
      <ul class="mbm list comments comments_list" data-story-id="{{id}}" data-project-id="{{project_id}}">
        {{#comments}}
          <li class="pvs comment_block action_block">
            <div class="main fine_delete">
              <strong>{{author.person.name}} </strong>
              <div class="neutral">{{text}}</div>
              {{#is_owner}}
                <div class="fine_delete_main">
                  <a class="fine_delete_link" href="#">Delete</a>
                </div>
                <div class="fine_delete_confirm">
                  <a class="delete_comment_link" href="#" data-id="{{id}}">Confirm Delete</a>
                  <a class="fine_delete_cancel" href="#">Cancel</a>
                </div>
              {{/is_owner}}
            </div>
            <div class="loader">
              <img src="images/spinner3.gif" alt="loading..." title="loading..." />
            </div>
          </li>
        {{/comments}}
      </ul>
    {{/has_comments}}
    <div class="add_comment_block action_block" data-story-id="{{id}}" data-project-id="{{project_id}}">
      <div class="main">
        <textarea class="add_comment_text" style="width:100%;height:40px;" autocomplete="off"></textarea>
        <input class="add_comment_button" type="button" value="Add" />
      </div>
      <div class="loader">
        <img src="images/spinner3.gif" alt="loading..." title="loading..." />
      </div>
    </div>
  </script>
  
  <!-- vendors scripts -->
  <script src="javascripts/vendors/jquery-1.7.1.min.js" type="text/javascript"></script>
  <script src="javascripts/vendors/jquery-ui-1.8.16.custom.min.js" type="text/javascript"></script>
  <script src="javascripts/vendors/jquery.jeditable.min.js" type="text/javascript"></script>
  <script src="javascripts/vendors/hogan-1.0.3.min.js" type="text/javascript"></script>
  <!-- swf only on popup -->
  <script src="javascripts/vendors/swfobject/swfobject.js" type="text/javascript"></script>
  <!-- main scripts -->
  <script src="javascripts/xml2json.js" type="text/javascript"></script>
  <script src="javascripts/pivotal_rocket_storage.js" type="text/javascript"></script>
  <script src="javascripts/pivotal_api_lib.js" type="text/javascript"></script>
  <script src="javascripts/pivotal_rocket_popup.js" type="text/javascript"></script>
  
</body>
</html>
